"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1064],{1064:(w,_,s)=>{s.r(_),s.d(_,{VotePageModule:()=>H});var p=s(177),C=s(9417),a=s(4742),u=s(2175),m=s(467),V=s(220),h=s(6932),g=s(5751),t=s(4438);const f=()=>[];function D(e,r){if(1&e){const i=t.RV6();t.j41(0,"div",9)(1,"ion-checkbox",10),t.bIt("ionChange",function(n){const l=t.eBV(i).$implicit,c=t.XpG(3);return t.Njj(c.selectMutiVoted(n,l))}),t.j41(2,"ion-label",11),t.EFF(3),t.k0s()()()}if(2&e){const i=r.$implicit;t.R7$(),t.Y8G("value",i.id),t.R7$(2),t.JRh(i.title)}}function P(e,r){if(1&e&&(t.j41(0,"div"),t.Z7z(1,D,4,2,"div",9,t.fX1),t.k0s()),2&e){const i=t.XpG(2);t.R7$(),t.Dyx(i.itemData.meetingvoted||t.lJ4(0,f))}}function b(e,r){if(1&e&&(t.j41(0,"div",9)(1,"ion-radio",13)(2,"ion-label",11),t.EFF(3),t.k0s()()()),2&e){const i=r.$implicit;t.R7$(),t.Y8G("value",i.id),t.R7$(2),t.JRh(i.title)}}function x(e,r){if(1&e){const i=t.RV6();t.j41(0,"ion-radio-group",12),t.bIt("ionChange",function(n){t.eBV(i);const l=t.XpG(2);return t.Njj(l.selectOneVoted(n))}),t.Z7z(1,b,4,2,"div",9,t.fX1),t.k0s()}if(2&e){const i=t.XpG(2);t.R7$(),t.Dyx(i.itemData.meetingvoted||t.lJ4(0,f))}}function F(e,r){if(1&e&&(t.j41(0,"h5",7),t.EFF(1),t.k0s(),t.nrm(2,"hr",8),t.DNE(3,P,3,1,"div")(4,x,3,1)),2&e){const i=t.XpG();t.R7$(),t.JRh(i.itemData.title),t.R7$(2),t.vxM(3,i.itemData.type?3:4)}}let M=(()=>{var e;class r{constructor(o,n,l){this.loadingController=o,this.modalController=n,this.toastController=l,this.itemData={}}ngOnInit(){this.refreshData()}refreshData(){var o=this;return(0,m.A)(function*(){(0,h.uG)({loadingController:o.loadingController,params:{id:o.id},callback:n=>{o.itemData=(null==n?void 0:n.data)||{}}})})()}modalClose(){this.modalController.dismiss()}modalSubmit(){var o,n;let l=null===(o=this.itemData)||void 0===o||null===(o=o.meetingvoted)||void 0===o?void 0:o.filter(c=>c.selected).map(c=>c.title).join(";");l?(0,V.bj)({params:{title:l,voteId:null===(n=this.itemData)||void 0===n?void 0:n.id,isCreatedByAd:0},callback:c=>{(0,g.q)(this.toastController,{},c).then(d=>d.present()),null!=c&&c.status&&this.modalController.dismiss(null==c?void 0:c.data,"success")}}):(0,g.q)(this.toastController,{color:"warning",message:"Vui l\xf2ng l\u1ef1a ch\u1ecdn tr\u01b0\u1edbc khi x\xe1c nh\u1eadn."}).then(c=>c.present())}selectMutiVoted(o,n){return(0,m.A)(function*(){n.selected=o.detail.checked})()}selectOneVoted(o){var n=this;return(0,m.A)(function*(){var l,c;null===(l=n.itemData)||void 0===l||null===(l=l.meetingvoted)||void 0===l||l.forEach(d=>{d.selected=!1}),null===(c=n.itemData)||void 0===c||null===(c=c.meetingvoted)||void 0===c||c.filter(d=>d.id==o.detail.value).forEach(d=>{d.selected=!0})})()}}return(e=r).\u0275fac=function(o){return new(o||e)(t.rXU(a.Xi),t.rXU(a.W3),t.rXU(a.K_))},e.\u0275cmp=t.VBU({type:e,selectors:[["app-modal-vote-choice"]],inputs:{id:"id"},decls:14,vars:1,consts:[["color","primary"],["slot","end"],[3,"click"],["color","light","name","close-outline"],[1,"ion-padding"],["collapse","fade"],["color","primary","expand","block",3,"click"],[1,"my-0","fw-700"],[1,"border-top","my-3"],[1,"mb-2"],["mode","md","labelPlacement","end",3,"ionChange","value"],[1,"text-wrap"],[3,"ionChange"],["mode","md","labelPlacement","end",3,"value"]],template:function(o,n){1&o&&(t.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),t.EFF(3,"Ch\u1ecdn bi\u1ec3u quy\u1ebft"),t.k0s(),t.j41(4,"ion-buttons",1)(5,"ion-button",2),t.bIt("click",function(){return n.modalClose()}),t.nrm(6,"ion-icon",3),t.k0s()()()(),t.j41(7,"ion-content",4),t.DNE(8,F,5,2),t.k0s(),t.j41(9,"ion-footer",5)(10,"ion-toolbar")(11,"ion-button",6),t.bIt("click",function(){return n.modalSubmit()}),t.j41(12,"ion-label"),t.EFF(13,"X\xe1c nh\u1eadn"),t.k0s()()()()),2&o&&(t.R7$(8),t.vxM(8,n.itemData?8:-1))},dependencies:[a.Jm,a.QW,a.eY,a.W9,a.M0,a.eU,a.iq,a.he,a.KO,a.f0,a.BC,a.ai,a.hB,a.Je]}),r})();var j=s(6539),y=s(1312),R=s(8833),E=s(2844),T=s(4842);const $=e=>({$implicit:e}),v=()=>[];function k(e,r){1&e&&(t.j41(0,"div",7)(1,"div",9)(2,"div")(3,"div",10),t.nrm(4,"ion-img",11),t.k0s(),t.j41(5,"div",12),t.EFF(6),t.nI1(7,"translate"),t.k0s()()()()),2&e&&(t.R7$(6),t.JRh(t.bMT(7,1,"DataNotFound")))}function I(e,r){if(1&e&&(t.j41(0,"div",13),t.eu8(1,14),t.k0s()),2&e){t.XpG();const i=t.sdS(14);t.R7$(),t.Y8G("ngTemplateOutlet",i)}}function X(e,r){if(1&e){const i=t.RV6();t.j41(0,"ion-infinite-scroll",15),t.bIt("ionInfinite",function(n){t.eBV(i);const l=t.XpG();return t.Njj(l.onIonInfinite(n))}),t.nrm(1,"ion-infinite-scroll-content"),t.k0s()}}function G(e,r){if(1&e&&(t.j41(0,"div",16),t.eu8(1,17),t.k0s()),2&e){const i=r.$implicit;t.XpG(2);const o=t.sdS(16);t.R7$(),t.Y8G("ngTemplateOutlet",o)("ngTemplateOutletContext",t.eq3(2,$,i))}}function O(e,r){if(1&e&&t.Z7z(0,G,2,4,"div",16,t.fX1),2&e){const i=t.XpG();t.Dyx(i.listData)}}function B(e,r){1&e&&(t.j41(0,"ion-text",20),t.EFF(1,"Ch\u1ecdn nhi\u1ec1u"),t.k0s())}function N(e,r){1&e&&(t.j41(0,"ion-text",20),t.EFF(1,"Ch\u1ecdn m\u1ed9t"),t.k0s())}function J(e,r){1&e&&(t.j41(0,"ion-chip",21)(1,"ion-label"),t.EFF(2,"\u0110\xe3 k\u1ebft th\xfac"),t.k0s()())}function L(e,r){1&e&&(t.j41(0,"ion-chip",24)(1,"ion-label"),t.EFF(2,"\u0110ang bi\u1ec3u quy\u1ebft"),t.k0s()())}function A(e,r){if(1&e&&(t.j41(0,"div",16)(1,"ion-checkbox",25)(2,"ion-label",26),t.EFF(3),t.k0s()()()),2&e){const i=r.$implicit;t.R7$(),t.Y8G("value",i.id),t.R7$(2),t.JRh(i.title)}}function U(e,r){if(1&e&&(t.j41(0,"div"),t.Z7z(1,A,4,2,"div",16,t.fX1),t.k0s()),2&e){const i=t.XpG().$implicit;t.R7$(),t.Dyx(i.meetingvoted||t.lJ4(0,v))}}function Y(e,r){if(1&e&&(t.j41(0,"div",16)(1,"ion-radio",25)(2,"ion-label",26),t.EFF(3),t.k0s()()()),2&e){const i=r.$implicit;t.R7$(),t.Y8G("value",i.id),t.R7$(2),t.JRh(i.title)}}function z(e,r){if(1&e&&(t.j41(0,"ion-radio-group"),t.Z7z(1,Y,4,2,"div",16,t.fX1),t.k0s()),2&e){const i=t.XpG().$implicit;t.R7$(),t.Dyx(i.meetingvoted||t.lJ4(0,v))}}function W(e,r){if(1&e){const i=t.RV6();t.nrm(0,"hr",27),t.j41(1,"div",28)(2,"ion-button",29),t.bIt("click",function(){t.eBV(i);const n=t.XpG().$implicit,l=t.XpG();return t.Njj(l.presentModalVoteChoice(n.id))}),t.j41(3,"ion-label"),t.EFF(4,"Ch\u1ecdn bi\u1ec3u quy\u1ebft"),t.k0s()()()}}function K(e,r){if(1&e&&(t.j41(0,"div",18)(1,"div")(2,"div",19),t.DNE(3,B,2,0,"ion-text",20)(4,N,2,0)(5,J,3,0,"ion-chip",21)(6,L,3,0),t.k0s(),t.nrm(7,"hr",22),t.j41(8,"div")(9,"div")(10,"b"),t.EFF(11),t.k0s()(),t.j41(12,"div",23),t.DNE(13,U,3,1,"div")(14,z,3,1),t.k0s()(),t.DNE(15,W,5,0),t.k0s()()),2&e){const i=r.$implicit;t.BMQ("color",i.end?"medium":"primary"),t.R7$(3),t.vxM(3,i.type?3:4),t.R7$(2),t.vxM(5,i.end?5:6),t.R7$(6),t.JRh(i.title),t.R7$(2),t.vxM(13,i.type?13:14),t.R7$(2),t.vxM(15,i.end?-1:15)}}const Z=[{path:"",component:(()=>{var e;class r{constructor(o,n,l,c){this.router=o,this.loadingController=n,this.toastController=l,this.modalController=c,this.APP_ROUTE=R._,this.APP_FUNC_FormatDate=y.Rv,this.filter={},this.paging={sortfield:null,sorttype:null,page:1,limit:20,active:!0},this.listData=[],this.limitLoad=0}ngOnInit(){var o=this;(0,m.A)(function*(){(yield(0,j.kU)())&&o.refreshData()})()}onIonRefresher(o){this.filter={},this.refreshData(()=>{o.target.complete()})}onIonInfinite(o){this.loadMore(()=>{o.target.complete()})}pushData(o){1==this.paging.page&&(this.listData.length=0),this.listData=this.listData.concat(o)}refreshData(o){this.filter={},this.paging.page=1,this.paging.active=!0,this.loadData_Paging_Limit(o)}loadMore(o){this.paging.page+=1,this.loadData_Paging_Limit(o)}searchChange(o){this.filter.search=o.target.value.replace(/\s+/g," ").trim(),this.paging.page=1,this.paging.active=!0,this.loadData_Paging_Limit()}sortChange(o,n){this.paging.sortfield=o||null,this.paging.sorttype=n||null,this.paging.page=1,this.paging.active=!0,this.loadData_Paging_Limit()}filterChange(){this.paging.page=1,this.paging.active=!0,this.loadData_Paging_Limit()}loadData_Paging_Limit(o){var n=this;return(0,m.A)(function*(){if(n.limitLoad>0)return void(o&&o());n.limitLoad=300;let l=setInterval(()=>{n.limitLoad-=100,n.limitLoad<=0&&(clearInterval(l),n.loadData_Paging(o))},100)})()}loadData_Paging(o){var n=this;return(0,m.A)(function*(){(0,h.hN)({loadingController:n.loadingController,params:{pageNumber:n.paging.page,pageSize:n.paging.limit},callback:l=>{var c;null!=l&&l.status?n.pushData(null!==(c=null==l?void 0:l.data)&&void 0!==c?c:[]):(0,g.q)(n.toastController,{},l).then(d=>d.present()),n.listData.length<n.paging.limit*n.paging.page&&(n.paging.active=!1),o&&o()}})})()}presentModalVoteChoice(o){var n=this;return(0,m.A)(function*(){if(!o)return;const l=yield n.modalController.create({component:M,componentProps:{id:o}});l.onDidDismiss().then(c=>{"success"==c.role&&n.refreshData()}),l.present()})()}}return(e=r).\u0275fac=function(o){return new(o||e)(t.rXU(u.Ix),t.rXU(a.Xi),t.rXU(a.K_),t.rXU(a.W3))},e.\u0275cmp=t.VBU({type:e,selectors:[["app-vote"]],decls:17,vars:2,consts:[["templateList",""],["templateVote",""],[1,"ion-no-border"],["color","primary"],["slot","start"],["defaultHref","/","text",""],["slot","fixed",3,"ionRefresh"],[1,"py-5"],[3,"ionInfinite",4,"ngIf"],[1,"d-flex","align-items-center","justify-content-center","data-not-found"],[1,"d-flex","justify-content-center"],["src","../../../assets/image/no-documents.svg",1,"w-40"],[1,"mt-2","text-center"],[1,"ion-padding"],[3,"ngTemplateOutlet"],[3,"ionInfinite"],[1,"mb-2"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"card-vote"],[1,"d-flex","align-items-center","justify-content-between"],["color","primary",1,"fs-14"],["color","medium",1,"ion-no-margin","fs-10","min-h-20","py-0","no-opacity"],[1,"border-top","mt-3","mb-2"],[1,"mt-2"],["color","warning",1,"ion-no-margin","fs-10","min-h-20","py-0","no-opacity"],["mode","md","labelPlacement","end","disabled","true",3,"value"],[1,"text-wrap"],[1,"border-top","my-2"],[1,"d-flex"],["size","small","color","primary",1,"flex-grow-1","m-1",3,"click"]],template:function(o,n){if(1&o){const l=t.RV6();t.j41(0,"ion-header",2)(1,"ion-toolbar",3)(2,"ion-buttons",4),t.nrm(3,"ion-back-button",5),t.k0s(),t.j41(4,"ion-title"),t.EFF(5,"Danh m\u1ee5c bi\u1ec3u quy\u1ebft"),t.k0s()()(),t.j41(6,"ion-content")(7,"ion-refresher",6),t.bIt("ionRefresh",function(d){return t.eBV(l),t.Njj(n.onIonRefresher(d))}),t.nrm(8,"ion-refresher-content"),t.k0s(),t.DNE(9,k,8,3,"div",7)(10,I,2,1)(11,X,2,0,"ion-infinite-scroll",8),t.k0s(),t.nrm(12,"app-footer-tabs"),t.DNE(13,O,2,0,"ng-template",null,0,t.C5r)(15,K,16,6,"ng-template",null,1,t.C5r)}2&o&&(t.R7$(9),t.vxM(9,n.listData.length?10:9),t.R7$(2),t.Y8G("ngIf",n.paging.active))},dependencies:[p.bT,p.T3,a.Jm,a.QW,a.eY,a.ZB,a.W9,a.eU,a.KW,a.Ax,a.Hp,a.he,a.KO,a.f0,a.To,a.Ki,a.IO,a.BC,a.ai,a.hB,a.Je,a.el,E.x,T.D9],styles:['.card-vote[_ngcontent-%COMP%]{--line-color: var(--ion-color-primary);position:relative}.card-vote[color=primary][_ngcontent-%COMP%]:before{--line-color: var(--ion-color-primary)}.card-vote[color=success][_ngcontent-%COMP%]:before{--line-color: var(--ion-color-success)}.card-vote[color=warning][_ngcontent-%COMP%]:before{--line-color: var(--ion-color-warning)}.card-vote[color=danger][_ngcontent-%COMP%]:before{--line-color: var(--ion-color-danger)}.card-vote[color=medium][_ngcontent-%COMP%]:before{--line-color: var(--ion-color-medium)}.card-vote[_ngcontent-%COMP%]:before{content:"";padding-left:1rem;background-color:var(--line-color);position:absolute;top:0;left:-3px;bottom:0;border-radius:1rem 0 0 1rem}.card-vote[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;padding:1rem;background-color:var(--ion-color-light);color:var(--ion-color-light-contrast);border-radius:1rem}']}),r})()}];let Q=(()=>{var e;class r{}return(e=r).\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.$C({type:e}),e.\u0275inj=t.G2t({imports:[u.iI.forChild(Z),u.iI]}),r})();var S=s(3664);let H=(()=>{var e;class r{}return(e=r).\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.$C({type:e}),e.\u0275inj=t.G2t({imports:[p.MD,C.YN,a.bv,Q,S.x]}),r})()}}]);