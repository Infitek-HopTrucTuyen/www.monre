"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5477],{5826:(Q,C,d)=>{d.d(C,{D7:()=>T,Dm:()=>E,KL:()=>u,Up:()=>L,bt:()=>D,j7:()=>j,l9:()=>f,qC:()=>_,rm:()=>x,s_:()=>A,vR:()=>P,vx:()=>y});var p=d(467),R=d(7586),m=d.n(R),h=d(5972);const u=function(){var s=(0,p.A)(function*(a){var e,i,b,g;a.params=a.params||{},(0,h.Ll)({url:"QuanLyLapLich/them",params:{title:a.params.title||"H\u1ecdp tr\u1ef1c tuy\u1ebfn",content:a.params.content,startTime:null!==(e=a.params.startTime)&&void 0!==e?e:m()(new Date).format("YYYY-MM-DDTHH:mm:ss"),endTime:null!==(i=a.params.endTime)&&void 0!==i?i:m()(new Date((g=new Date,g.setHours(g.getHours()+4),g))).format("YYYY-MM-DDTHH:mm:ss"),chairMan:a.params.chairMan,roomName:null!==(b=a.params.roomName)&&void 0!==b?b:m()(new Date).format("YYYYMMDDHHmmss"),place:a.params.place,status:a.params.status,start:a.params.start,token:a.params.token,serverId:4,typeId:a.params.typeId,sharedRole:a.params.sharedRole,password:a.params.password,isLobby:a.params.isLobby,isPublished:a.params.isPublished},success:g=>{"function"==typeof a.callback&&a.callback(g.data||null)},error:g=>{var k;"function"==typeof a.callback&&a.callback(null==g||null===(k=g.response)||void 0===k?void 0:k.data),console.error(g)},loading:a.loading,loadingController:a.loadingController})});return function(e){return s.apply(this,arguments)}}(),f=function(){var s=(0,p.A)(function*(a){a.params=a.params||{},(0,h.IH)({url:`QuanLyLapLich/chinhsua?id=${a.params.id}`,params:{id:a.params.id,title:a.params.title,content:a.params.content,startTime:a.params.startTime,endTime:a.params.endTime,chairMan:a.params.chairMan,roomName:a.params.roomName,place:a.params.place,status:a.params.status,start:a.params.start,token:a.params.token,serverId:a.params.serverId,typeId:a.params.typeId,sharedRole:a.params.sharedRole,password:a.params.password,isLobby:a.params.isLobby,isPublished:a.params.isPublished,modifiedDate:a.params.modifiedDate,modifiedBy:a.params.modifiedBy,don_vi:a.params.don_vi},success:e=>{"function"==typeof a.callback&&a.callback(e.data||null)},error:e=>{var i;"function"==typeof a.callback&&a.callback(null==e||null===(i=e.response)||void 0===i?void 0:i.data),console.error(e)},loading:a.loading,loadingController:a.loadingController})});return function(e){return s.apply(this,arguments)}}(),_=function(){var s=(0,p.A)(function*(a){a.params=a.params||{},(0,h.sj)({url:"QuanLyLapLich/xoa",params:{id:a.params.id},success:e=>{"function"==typeof a.callback&&a.callback(e.data||null)},error:e=>{var i;"function"==typeof a.callback&&a.callback(null==e||null===(i=e.response)||void 0===i?void 0:i.data),console.error(e)},loading:a.loading,loadingController:a.loadingController})});return function(e){return s.apply(this,arguments)}}(),L=function(){var s=(0,p.A)(function*(a){a.params=a.params||{},(0,h.sj)({url:"QuanLyLapLich/xoahoantoan",params:{id:a.params.id},success:e=>{"function"==typeof a.callback&&a.callback(e.data||null)},error:e=>{var i;"function"==typeof a.callback&&a.callback(null==e||null===(i=e.response)||void 0===i?void 0:i.data),console.error(e)},loading:a.loading,loadingController:a.loadingController})});return function(e){return s.apply(this,arguments)}}(),y=function(){var s=(0,p.A)(function*(a){a.params=a.params||{},(0,h.hm)({url:"QuanLyLapLich/thongtin",params:{id:a.params.id},success:e=>{"function"==typeof a.callback&&a.callback(e.data||null)},error:e=>{var i;"function"==typeof a.callback&&a.callback(null==e||null===(i=e.response)||void 0===i?void 0:i.data),console.error(e)},loading:a.loading,loadingController:a.loadingController})});return function(e){return s.apply(this,arguments)}}(),D=function(){var s=(0,p.A)(function*(a){a.params=a.params||{},(0,h.hm)({url:"QuanLyLapLich/chitietphonghop",params:{roomName:a.params.roomName},success:e=>{"function"==typeof a.callback&&a.callback(e.data||null)},error:e=>{var i;"function"==typeof a.callback&&a.callback(null==e||null===(i=e.response)||void 0===i?void 0:i.data),console.error(e)},loading:a.loading,loadingController:a.loadingController})});return function(e){return s.apply(this,arguments)}}(),P=function(){var s=(0,p.A)(function*(a){a.params=a.params||{},(0,h.Ll)({url:`QuanLyLapLich/xacnhan?id=${a.params.id}`,params:{id:a.params.id},success:e=>{"function"==typeof a.callback&&a.callback(e.data||null)},error:e=>{var i;"function"==typeof a.callback&&a.callback(null==e||null===(i=e.response)||void 0===i?void 0:i.data),console.error(e)},loading:a.loading,loadingController:a.loadingController})});return function(e){return s.apply(this,arguments)}}(),E=function(){var s=(0,p.A)(function*(a){a.params=a.params||{},(0,h.Ll)({url:`QuanLyLapLich/huyxacnhan?id=${a.params.id}`,params:{id:a.params.id},success:e=>{"function"==typeof a.callback&&a.callback(e.data||null)},error:e=>{var i;"function"==typeof a.callback&&a.callback(null==e||null===(i=e.response)||void 0===i?void 0:i.data),console.error(e)},loading:a.loading,loadingController:a.loadingController})});return function(e){return s.apply(this,arguments)}}(),x=function(){var s=(0,p.A)(function*(a){a.params=a.params||{},(0,h.Ll)({url:`QuanLyLapLich/khoiphuc?id=${a.params.id}`,params:{id:a.params.id},success:e=>{"function"==typeof a.callback&&a.callback(e.data||null)},error:e=>{var i;"function"==typeof a.callback&&a.callback(null==e||null===(i=e.response)||void 0===i?void 0:i.data),console.error(e)},loading:a.loading,loadingController:a.loadingController})});return function(e){return s.apply(this,arguments)}}(),A=function(){var s=(0,p.A)(function*(a){a.params=a.params||{},(0,h.hm)({url:"QuanLyLapLich/danhsach",params:{pageNumber:a.params.pageNumber,pageSize:a.params.pageSize,search:a.params.search,dateFrom:a.params.dateFrom,dateTo:a.params.dateTo,status:a.params.status,start:a.params.start,isdeleted:a.params.isdeleted},success:e=>{"function"==typeof a.callback&&a.callback(e.data||null)},error:e=>{var i;"function"==typeof a.callback&&a.callback(null==e||null===(i=e.response)||void 0===i?void 0:i.data),console.error(e)},loading:a.loading,loadingController:a.loadingController})});return function(e){return s.apply(this,arguments)}}(),T=function(){var s=(0,p.A)(function*(a){a.params=a.params||{},(0,h.hm)({url:"QuanLyLapLich/danhsachserver",params:{pageNumber:a.params.pageNumber,pageSize:a.params.pageSize,search:a.params.search},success:e=>{"function"==typeof a.callback&&a.callback(e.data||null)},error:e=>{var i;"function"==typeof a.callback&&a.callback(null==e||null===(i=e.response)||void 0===i?void 0:i.data),console.error(e)},loading:a.loading,loadingController:a.loadingController})});return function(e){return s.apply(this,arguments)}}(),j=function(){var s=(0,p.A)(function*(a){a.params=a.params||{},(0,h.hm)({url:"QuanLyLapLich/thongtinnguoidung",params:{pageNumber:a.params.pageNumber,pageSize:a.params.pageSize,search:a.params.search},success:e=>{"function"==typeof a.callback&&a.callback(e.data||null)},error:e=>{var i;"function"==typeof a.callback&&a.callback(null==e||null===(i=e.response)||void 0===i?void 0:i.data),console.error(e)},loading:a.loading,loadingController:a.loadingController})});return function(e){return s.apply(this,arguments)}}()},5477:(Q,C,d)=>{d.r(C),d.d(C,{RoomPageModule:()=>k});var p=d(177),R=d(9417),m=d(4742),h=d(2175),u=d(467);const _=(0,d(5083).F3)("Jitsi",{web:()=>d.e(7185).then(d.bind(d,7185)).then(r=>new r.JitsiWeb)});var L=d(5826),y=d(6539),D=d(5751),P=d(9485),E=d(8833),n=d(4438);const x=["inputRoomPwd"];function A(r,v){1&r&&n.nrm(0,"div")}function T(r,v){if(1&r){const c=n.RV6();n.j41(0,"div")(1,"div",8),n.EFF(2,"M\u1eadt kh\u1ea9u "),n.j41(3,"ion-text",9),n.EFF(4,"*"),n.k0s()(),n.j41(5,"ion-input",10,0),n.bIt("ionChange",function(l){n.eBV(c);const o=n.XpG(2);return n.Njj(o.changeRoomPwd(l))})("keyup.enter",function(){n.eBV(c);const l=n.XpG(2);return n.Njj(l.checkAccepted())}),n.k0s()()}}function j(r,v){if(1&r){const c=n.RV6();n.j41(0,"div",11)(1,"div",8),n.EFF(2,"T\xean hi\u1ec3n th\u1ecb "),n.j41(3,"ion-text",9),n.EFF(4,"*"),n.k0s()(),n.j41(5,"ion-input",12),n.bIt("ionChange",function(l){n.eBV(c);const o=n.XpG(2);return n.Njj(o.changeUserName(l))}),n.k0s()(),n.j41(6,"div",11)(7,"div",8),n.EFF(8,"Email "),n.j41(9,"ion-text",9),n.EFF(10,"*"),n.k0s()(),n.j41(11,"ion-input",13),n.bIt("ionChange",function(l){n.eBV(c);const o=n.XpG(2);return n.Njj(o.changeUserEmail(l))}),n.k0s()()}if(2&r){const c=n.XpG(2);n.R7$(5),n.Y8G("value",c.userData.name),n.R7$(6),n.Y8G("value",c.userData.email)}}function s(r,v){if(1&r){const c=n.RV6();n.j41(0,"div")(1,"div",8),n.EFF(2,"M\u1eadt kh\u1ea9u "),n.j41(3,"ion-text",9),n.EFF(4,"*"),n.k0s()(),n.j41(5,"ion-input",10,0),n.bIt("ionChange",function(l){n.eBV(c);const o=n.XpG(2);return n.Njj(o.changeRoomPwd(l))})("keyup.enter",function(){n.eBV(c);const l=n.XpG(2);return n.Njj(l.checkAccepted())}),n.k0s()()}}function a(r,v){if(1&r){const c=n.RV6();n.j41(0,"div",11)(1,"div",8),n.EFF(2,"T\xean hi\u1ec3n th\u1ecb "),n.j41(3,"ion-text",9),n.EFF(4,"*"),n.k0s()(),n.j41(5,"ion-input",12),n.bIt("ionChange",function(l){n.eBV(c);const o=n.XpG(2);return n.Njj(o.changeUserName(l))}),n.k0s()(),n.j41(6,"div",11)(7,"div",8),n.EFF(8,"Email "),n.j41(9,"ion-text",9),n.EFF(10,"*"),n.k0s()(),n.j41(11,"ion-input",13),n.bIt("ionChange",function(l){n.eBV(c);const o=n.XpG(2);return n.Njj(o.changeUserEmail(l))}),n.k0s()()}if(2&r){const c=n.XpG(2);n.R7$(5),n.Y8G("value",c.userData.name),n.R7$(6),n.Y8G("value",c.userData.email)}}function e(r,v){if(1&r){const c=n.RV6();n.j41(0,"div",5),n.DNE(1,T,7,0,"div")(2,j,12,2)(3,s,7,0,"div")(4,a,12,2),n.j41(5,"div",6)(6,"ion-button",7),n.bIt("click",function(){n.eBV(c);const l=n.XpG();return n.Njj(l.checkAccepted())}),n.j41(7,"ion-label"),n.EFF(8,"Tham gia"),n.k0s()()()()}if(2&r){const c=n.XpG();n.R7$(),n.vxM(1,c.isPassedPwd?-1:1),n.R7$(),n.vxM(2,c.isPassedAuth?-1:2),n.R7$(),n.vxM(3,c.isPassedPwd?-1:3),n.R7$(),n.vxM(4,c.isPassedAuth?-1:4)}}const b=[{path:"",component:(()=>{var r;class v{constructor(t,l,o,M,F){this.router=l,this.loadingController=o,this.modalController=M,this.toastController=F;let N=t.snapshot.params.id;N&&(this.roomId=N)}ngOnInit(){var t=this;(0,u.A)(function*(){var l,o;t.user=(yield(0,y.xk)()).data,t.userData={name:null===(l=t.user)||void 0===l?void 0:l.name,email:null===(o=t.user)||void 0===o?void 0:o.email},yield(0,P.Dy)(),yield(0,P.Gd)(),t.refreshData()})()}ngAfterViewInit(){setTimeout(()=>{var t;null===(t=this.inputRoomPwd)||void 0===t||t.setFocus()},300)}refreshData(){var t=this;return(0,u.A)(function*(){(0,L.vx)({loadingController:t.loadingController,params:{id:t.roomId},callback:l=>{null!=l&&l.status?(t.roomData=null==l?void 0:l.data,t.checkAccepted()):(0,D.q)(t.toastController,{},l).then(o=>o.present())}})})()}checkAccepted(){var t,l,o;this.isPassedAuth=!(!this.userData.name||!this.userData.email),this.isPassedPwd=null===(t=this.roomData)||void 0===t||!t.password||(null===(l=this.roomData)||void 0===l?void 0:l.password)==(null===(o=this.roomData)||void 0===o?void 0:o.confirm_password),this.isAccepted=this.isPassedAuth&&this.isPassedPwd}changeRoomPwd(t){var l=this;return(0,u.A)(function*(){l.roomData&&(l.roomData.confirm_password=t.detail.value)})()}changeUserName(t){var l=this;return(0,u.A)(function*(){var o;l.userData.name=null===(o=t.detail.value)||void 0===o?void 0:o.trim()})()}changeUserEmail(t){var l=this;return(0,u.A)(function*(){var o;l.userData.email=null===(o=t.detail.value)||void 0===o?void 0:o.trim()})()}initJitsi(){var t=this;return(0,u.A)(function*(){var l;if(t.roomData&&t.roomData.roomName&&null!==(l=t.roomData.server)&&void 0!==l&&l.ip&&t.roomData.token){const o=yield _.joinConference({roomName:t.roomData.roomName,url:t.roomData.server.ip,featureFlags:{"prejoinpage.enabled":!1,"recording.enabled":!1,"live-streaming.enabled":!1,"android.screensharing.enabled":!1},subject:t.userData.name,displayName:t.userData.name,email:t.userData.email,avatarURL:"",startWithAudioMuted:!0,startWithVideoMuted:!1,chatEnabled:!1,inviteEnabled:!1,token:t.roomData.token});console.log(o),window.addEventListener("onConferenceJoined",()=>{}),window.addEventListener("onConferenceTerminated",()=>{}),window.addEventListener("onConferenceLeft",()=>{}),window.addEventListener("onChatMessageReceived",M=>{}),window.addEventListener("onParticipantsInfoRetrieved",M=>{}),window.addEventListener("readyToClose",()=>{console.log("User has left the conference"),window.location.replace(E._.HOME)})}})()}}return(r=v).\u0275fac=function(t){return new(t||r)(n.rXU(h.nX),n.rXU(h.Ix),n.rXU(m.Xi),n.rXU(m.W3),n.rXU(m.K_))},r.\u0275cmp=n.VBU({type:r,selectors:[["app-room"]],viewQuery:function(t,l){if(1&t&&n.GBs(x,5),2&t){let o;n.mGM(o=n.lsd())&&(l.inputRoomPwd=o.first)}},decls:9,vars:2,consts:[["inputRoomPwd",""],[1,"ion-no-border","ion-header-custom"],["color","primary"],["slot","start"],["defaultHref","/","text",""],[1,"ion-padding"],[1,"mt-3"],["color","primary","expand","block",1,"ion-no-margin",3,"click"],[1,"fw-600","fs-16","mb-1"],["color","danger"],["mode","md","fill","outline","clear-input","true","placeholder","Nh\u1eadp m\u1eadt kh\u1ea9u ph\xf2ng h\u1ecdp",3,"ionChange","keyup.enter"],[1,"mt-4"],["mode","md","fill","outline","clear-input","true","placeholder","Nh\u1eadp t\xean hi\u1ec3n th\u1ecb","minlength","6","maxlength","100",3,"ionChange","value"],["mode","md","fill","outline","clear-input","true","placeholder","Nh\u1eadp email","minlength","6","maxlength","100",3,"ionChange","value"]],template:function(t,l){1&t&&(n.j41(0,"ion-header",1)(1,"ion-toolbar",2)(2,"ion-buttons",3),n.nrm(3,"ion-back-button",4),n.k0s(),n.j41(4,"ion-title"),n.EFF(5),n.k0s()()(),n.j41(6,"ion-content"),n.DNE(7,A,1,0,"div")(8,e,9,4),n.k0s()),2&t&&(n.R7$(5),n.JRh(null==l.roomData?null:l.roomData.title),n.R7$(2),n.vxM(7,l.isAccepted&&l.roomData&&l.userData?7:8))},dependencies:[m.Jm,m.QW,m.W9,m.eU,m.$w,m.he,m.IO,m.BC,m.ai,m.Gw,m.el],styles:["ion-input[fill=outline][_ngcontent-%COMP%]{--border-radius: 0}"]}),v})()}];let g=(()=>{var r;class v{}return(r=v).\u0275fac=function(t){return new(t||r)},r.\u0275mod=n.$C({type:r}),r.\u0275inj=n.G2t({imports:[h.iI.forChild(b),h.iI]}),v})(),k=(()=>{var r;class v{}return(r=v).\u0275fac=function(t){return new(t||r)},r.\u0275mod=n.$C({type:r}),r.\u0275inj=n.G2t({imports:[p.MD,R.YN,m.bv,g]}),v})()},5751:(Q,C,d)=>{d.d(C,{q:()=>R});var p=d(467);const R=function(){var m=(0,p.A)(function*(h,u,f){var _,L,y;return!u.message&&f&&(u.message=null!==(y=null==f?void 0:f.message)&&void 0!==y?y:"H\u1ec7 th\u1ed1ng kh\xf4ng c\xf3 ph\u1ea3n h\u1ed3i!",u.icon||(u.icon=null!=f&&f.message?"checkmark-circle-sharp":"alert-circle-outline"),u.color||(u.color=null!=f&&f.status?"success":-1==(null==f?void 0:f.data)?"danger":"warning")),u.position||(u.position="middle"),u.icon||(u.icon="bulb-outline"),u.color||(u.color="secondary"),u.duration=null!==(_=u.duration)&&void 0!==_?_:3e3,u.animated=null===(L=u.animated)||void 0===L||L,u.buttons=[{icon:"close-outline",side:"end",role:"cancel"}],yield h.create(u)});return function(u,f,_){return m.apply(this,arguments)}}()}}]);