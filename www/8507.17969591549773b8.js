"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8507],{220:(M,v,m)=>{m.d(v,{On:()=>p,bj:()=>y,bp:()=>g,nz:()=>C,q5:()=>b});var u=m(467),d=m(5972);const g=function(){var _=(0,u.A)(function*(n){n.params=n.params||{},(0,d.Ll)({url:`BieuQuyet/kichhoat?id=${n.params.id}`,params:{id:n.params.id},success:a=>{"function"==typeof n.callback&&n.callback(a.data||null)},error:a=>{var e;"function"==typeof n.callback&&n.callback(null==a||null===(e=a.response)||void 0===e?void 0:e.data),console.error(a)},loading:n.loading,loadingController:n.loadingController})});return function(a){return _.apply(this,arguments)}}(),p=function(){var _=(0,u.A)(function*(n){n.params=n.params||{},(0,d.Ll)({url:`BieuQuyet/ketthuc?id=${n.params.id}`,params:{id:n.params.id},success:a=>{"function"==typeof n.callback&&n.callback(a.data||null)},error:a=>{var e;"function"==typeof n.callback&&n.callback(null==a||null===(e=a.response)||void 0===e?void 0:e.data),console.error(a)},loading:n.loading,loadingController:n.loadingController})});return function(a){return _.apply(this,arguments)}}(),y=function(){var _=(0,u.A)(function*(n){n.params=n.params||{},(0,d.Ll)({url:"BieuQuyet/chonbieuquyet",params:{title:n.params.title,voteId:n.params.voteId,isCreatedByAd:n.params.isCreatedByAd},success:a=>{"function"==typeof n.callback&&n.callback(a.data||null)},error:a=>{var e;"function"==typeof n.callback&&n.callback(null==a||null===(e=a.response)||void 0===e?void 0:e.data),console.error(a)},loading:n.loading,loadingController:n.loadingController})});return function(a){return _.apply(this,arguments)}}(),C=function(){var _=(0,u.A)(function*(n){n.params=n.params||{},(0,d.IH)({url:"BieuQuyet/chinhsua",params:{id:n.params.id,title:n.params.title,voteId:n.params.voteId},success:a=>{"function"==typeof n.callback&&n.callback(a.data||null)},error:a=>{var e;"function"==typeof n.callback&&n.callback(null==a||null===(e=a.response)||void 0===e?void 0:e.data),console.error(a)},loading:n.loading,loadingController:n.loadingController})});return function(a){return _.apply(this,arguments)}}(),b=function(){var _=(0,u.A)(function*(n){n.params=n.params||{},(0,d.sj)({url:"BieuQuyet/xoa",params:{id:n.params.id},success:a=>{"function"==typeof n.callback&&n.callback(a.data||null)},error:a=>{var e;"function"==typeof n.callback&&n.callback(null==a||null===(e=a.response)||void 0===e?void 0:e.data),console.error(a)},loading:n.loading,loadingController:n.loadingController})});return function(a){return _.apply(this,arguments)}}()},6932:(M,v,m)=>{m.d(v,{AE:()=>l,FQ:()=>_,Sw:()=>g,WW:()=>y,hN:()=>B,uG:()=>c,xw:()=>p,zD:()=>b,zs:()=>C});var u=m(467),d=m(5972);const g=function(){var n=(0,u.A)(function*(a){a.params=a.params||{},(0,d.Ll)({url:"DanhMucBieuQuyet/them",params:{title:a.params.title,type:a.params.type,status:a.params.status,end:a.params.end,scheduleId:a.params.scheduleId},success:e=>{"function"==typeof a.callback&&a.callback(e.data||null)},error:e=>{var t;"function"==typeof a.callback&&a.callback(null==e||null===(t=e.response)||void 0===t?void 0:t.data),console.error(e)},loading:a.loading,loadingController:a.loadingController})});return function(e){return n.apply(this,arguments)}}(),p=function(){var n=(0,u.A)(function*(a){a.params=a.params||{},(0,d.IH)({url:`DanhMucBieuQuyet/chinhsua?id=${a.params.id}`,params:{id:a.params.id,title:a.params.title,type:a.params.type,status:a.params.status,end:a.params.end,scheduleId:a.params.scheduleId},success:e=>{"function"==typeof a.callback&&a.callback(e.data||null)},error:e=>{var t;"function"==typeof a.callback&&a.callback(null==e||null===(t=e.response)||void 0===t?void 0:t.data),console.error(e)},loading:a.loading,loadingController:a.loadingController})});return function(e){return n.apply(this,arguments)}}(),l=function(){var n=(0,u.A)(function*(a){a.params=a.params||{},(0,d.sj)({url:"DanhMucBieuQuyet/xoa",params:{id:a.params.id},success:e=>{"function"==typeof a.callback&&a.callback(e.data||null)},error:e=>{var t;"function"==typeof a.callback&&a.callback(null==e||null===(t=e.response)||void 0===t?void 0:t.data),console.error(e)},loading:a.loading,loadingController:a.loadingController})});return function(e){return n.apply(this,arguments)}}(),c=function(){var n=(0,u.A)(function*(a){a.params=a.params||{},(0,d.hm)({url:"DanhMucBieuQuyet/xemchitiet",params:{id:a.params.id},success:e=>{"function"==typeof a.callback&&a.callback(e.data||null)},error:e=>{var t;"function"==typeof a.callback&&a.callback(null==e||null===(t=e.response)||void 0===t?void 0:t.data),console.error(e)},loading:a.loading,loadingController:a.loadingController})});return function(e){return n.apply(this,arguments)}}(),y=function(){var n=(0,u.A)(function*(a){a.params=a.params||{},(0,d.hm)({url:"DanhMucBieuQuyet/danhsach",params:{id:a.params.id},success:e=>{"function"==typeof a.callback&&a.callback(e.data||null)},error:e=>{var t;"function"==typeof a.callback&&a.callback(null==e||null===(t=e.response)||void 0===t?void 0:t.data),console.error(e)},loading:a.loading,loadingController:a.loadingController})});return function(e){return n.apply(this,arguments)}}(),C=function(){var n=(0,u.A)(function*(a){a.params=a.params||{},(0,d.Ll)({url:`DanhMucBieuQuyet/xacnhan?id=${a.params.id}`,params:{id:a.params.id},success:e=>{"function"==typeof a.callback&&a.callback(e.data||null)},error:e=>{var t;"function"==typeof a.callback&&a.callback(null==e||null===(t=e.response)||void 0===t?void 0:t.data),console.error(e)},loading:a.loading,loadingController:a.loadingController})});return function(e){return n.apply(this,arguments)}}(),b=function(){var n=(0,u.A)(function*(a){a.params=a.params||{},(0,d.Ll)({url:`DanhMucBieuQuyet/huyxacnhan?id=${a.params.id}`,params:{id:a.params.id},success:e=>{"function"==typeof a.callback&&a.callback(e.data||null)},error:e=>{var t;"function"==typeof a.callback&&a.callback(null==e||null===(t=e.response)||void 0===t?void 0:t.data),console.error(e)},loading:a.loading,loadingController:a.loadingController})});return function(e){return n.apply(this,arguments)}}(),B=function(){var n=(0,u.A)(function*(a){a.params=a.params||{},(0,d.hm)({url:"DanhMucBieuQuyet/danhmucxacnhan",params:{pageNumber:a.params.pageNumber,pageSize:a.params.pageSize,scheduleId:a.params.scheduleId},success:e=>{"function"==typeof a.callback&&a.callback(e.data||null)},error:e=>{var t;"function"==typeof a.callback&&a.callback(null==e||null===(t=e.response)||void 0===t?void 0:t.data),console.error(e)},loading:a.loading,loadingController:a.loadingController})});return function(e){return n.apply(this,arguments)}}(),_=function(){var n=(0,u.A)(function*(a){a.params=a.params||{},(0,d.hm)({url:"DanhMucBieuQuyet/danhsachphonghop",params:{pageNumber:a.params.pageNumber,pageSize:a.params.pageSize},success:e=>{"function"==typeof a.callback&&a.callback(e.data||null)},error:e=>{var t;"function"==typeof a.callback&&a.callback(null==e||null===(t=e.response)||void 0===t?void 0:t.data),console.error(e)},loading:a.loading,loadingController:a.loadingController})});return function(e){return n.apply(this,arguments)}}()},8507:(M,v,m)=>{m.d(v,{y:()=>a});var u=m(467),d=m(220),g=m(6932),p=m(5751),l=m(4438),c=m(4742);const y=()=>[];function C(e,t){if(1&e){const r=l.RV6();l.j41(0,"div",9)(1,"ion-checkbox",10),l.bIt("ionChange",function(o){const s=l.eBV(r).$implicit,h=l.XpG(3);return l.Njj(h.selectMutiVoted(o,s))}),l.j41(2,"ion-label",11),l.EFF(3),l.k0s()()()}if(2&e){const r=t.$implicit;l.R7$(),l.Y8G("value",r.id),l.R7$(2),l.JRh(r.title)}}function b(e,t){if(1&e&&(l.j41(0,"div"),l.Z7z(1,C,4,2,"div",9,l.fX1),l.k0s()),2&e){const r=l.XpG(2);l.R7$(),l.Dyx(r.itemData.meetingvoted||l.lJ4(0,y))}}function B(e,t){if(1&e&&(l.j41(0,"div",9)(1,"ion-radio",13)(2,"ion-label",11),l.EFF(3),l.k0s()()()),2&e){const r=t.$implicit;l.R7$(),l.Y8G("value",r.id),l.R7$(2),l.JRh(r.title)}}function _(e,t){if(1&e){const r=l.RV6();l.j41(0,"ion-radio-group",12),l.bIt("ionChange",function(o){l.eBV(r);const s=l.XpG(2);return l.Njj(s.selectOneVoted(o))}),l.Z7z(1,B,4,2,"div",9,l.fX1),l.k0s()}if(2&e){const r=l.XpG(2);l.R7$(),l.Dyx(r.itemData.meetingvoted||l.lJ4(0,y))}}function n(e,t){if(1&e&&(l.j41(0,"h5",7),l.EFF(1),l.k0s(),l.nrm(2,"hr",8),l.DNE(3,b,3,1,"div")(4,_,3,1)),2&e){const r=l.XpG();l.R7$(),l.JRh(r.itemData.title),l.R7$(2),l.vxM(3,r.itemData.type?3:4)}}let a=(()=>{var e;class t{constructor(i,o,s){this.loadingController=i,this.modalController=o,this.toastController=s,this.itemData={}}ngOnInit(){this.refreshData()}refreshData(){var i=this;return(0,u.A)(function*(){(0,g.uG)({loadingController:i.loadingController,params:{id:i.id},callback:o=>{i.itemData=(null==o?void 0:o.data)||{}}})})()}modalClose(){this.modalController.dismiss()}modalSubmit(){var i;let o=null===(i=this.itemData)||void 0===i||null===(i=i.meetingvoted)||void 0===i?void 0:i.filter(h=>h.selected);if(null==o||!o.length)return void(0,p.q)(this.toastController,{color:"warning",message:"Vui l\xf2ng l\u1ef1a ch\u1ecdn tr\u01b0\u1edbc khi x\xe1c nh\u1eadn."}).then(h=>h.present());let s=[];o.forEach(h=>{s.push(new Promise((f,Q)=>{var D;(0,d.bj)({params:{title:h.title,voteId:null===(D=this.itemData)||void 0===D?void 0:D.id,isCreatedByAd:0},callback:k=>{null!=k&&k.status||(0,p.q)(this.toastController,{},k).then(R=>R.present()),f(k)}})}))}),Promise.all(s).then(h=>{(0,p.q)(this.toastController,{color:"success",message:"Bi\u1ec3u quy\u1ebft th\xe0nh c\xf4ng"}).then(f=>f.present()),this.modalController.dismiss(null,"success")})}selectMutiVoted(i,o){return(0,u.A)(function*(){o.selected=i.detail.checked})()}selectOneVoted(i){var o=this;return(0,u.A)(function*(){var s,h;null===(s=o.itemData)||void 0===s||null===(s=s.meetingvoted)||void 0===s||s.forEach(f=>{f.selected=!1}),null===(h=o.itemData)||void 0===h||null===(h=h.meetingvoted)||void 0===h||h.filter(f=>f.id==i.detail.value).forEach(f=>{f.selected=!0})})()}}return(e=t).\u0275fac=function(i){return new(i||e)(l.rXU(c.Xi),l.rXU(c.W3),l.rXU(c.K_))},e.\u0275cmp=l.VBU({type:e,selectors:[["app-modal-vote-choice"]],inputs:{id:"id"},decls:14,vars:1,consts:[["color","primary"],["slot","end"],[3,"click"],["color","light","name","close-outline"],[1,"ion-padding"],["collapse","fade"],["color","primary","expand","block",3,"click"],[1,"my-0","fw-700"],[1,"border-top","my-3"],[1,"mb-2"],["mode","md","labelPlacement","end",3,"ionChange","value"],[1,"text-wrap"],[3,"ionChange"],["mode","md","labelPlacement","end",3,"value"]],template:function(i,o){1&i&&(l.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),l.EFF(3,"Ch\u1ecdn bi\u1ec3u quy\u1ebft"),l.k0s(),l.j41(4,"ion-buttons",1)(5,"ion-button",2),l.bIt("click",function(){return o.modalClose()}),l.nrm(6,"ion-icon",3),l.k0s()()()(),l.j41(7,"ion-content",4),l.DNE(8,n,5,2),l.k0s(),l.j41(9,"ion-footer",5)(10,"ion-toolbar")(11,"ion-button",6),l.bIt("click",function(){return o.modalSubmit()}),l.j41(12,"ion-label"),l.EFF(13,"X\xe1c nh\u1eadn"),l.k0s()()()()),2&i&&(l.R7$(8),l.vxM(8,o.itemData?8:-1))},dependencies:[c.Jm,c.QW,c.eY,c.W9,c.M0,c.eU,c.iq,c.he,c.KO,c.f0,c.BC,c.ai,c.hB,c.Je]}),t})()}}]);