"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8902],{5826:(b,C,u)=>{u.d(C,{D7:()=>T,Dm:()=>x,KL:()=>o,Up:()=>v,bt:()=>e,j7:()=>A,l9:()=>m,qC:()=>L,rm:()=>M,s_:()=>k,vR:()=>P,vx:()=>y});var p=u(467),E=u(7586),h=u.n(E),c=u(5972);const o=function(){var f=(0,p.A)(function*(a){var n,i,R,g;a.params=a.params||{},(0,c.Ll)({url:"QuanLyLapLich/them",params:{title:a.params.title||"H\u1ecdp tr\u1ef1c tuy\u1ebfn",content:a.params.content,startTime:null!==(n=a.params.startTime)&&void 0!==n?n:h()(new Date).format("YYYY-MM-DDTHH:mm:ss"),endTime:null!==(i=a.params.endTime)&&void 0!==i?i:h()(new Date((g=new Date,g.setHours(g.getHours()+4),g))).format("YYYY-MM-DDTHH:mm:ss"),chairMan:a.params.chairMan,roomName:null!==(R=a.params.roomName)&&void 0!==R?R:h()(new Date).format("YYYYMMDDHHmmss"),place:a.params.place,status:a.params.status,start:a.params.start,token:a.params.token,serverId:4,typeId:a.params.typeId,sharedRole:a.params.sharedRole,password:a.params.password,isLobby:a.params.isLobby,isPublished:a.params.isPublished},success:g=>{"function"==typeof a.callback&&a.callback(g.data||null)},error:g=>{var D;"function"==typeof a.callback&&a.callback(null==g||null===(D=g.response)||void 0===D?void 0:D.data),console.error(g)},loading:a.loading,loadingController:a.loadingController})});return function(n){return f.apply(this,arguments)}}(),m=function(){var f=(0,p.A)(function*(a){a.params=a.params||{},(0,c.IH)({url:`QuanLyLapLich/chinhsua?id=${a.params.id}`,params:{id:a.params.id,title:a.params.title,content:a.params.content,startTime:a.params.startTime,endTime:a.params.endTime,chairMan:a.params.chairMan,roomName:a.params.roomName,place:a.params.place,status:a.params.status,start:a.params.start,token:a.params.token,serverId:a.params.serverId,typeId:a.params.typeId,sharedRole:a.params.sharedRole,password:a.params.password,isLobby:a.params.isLobby,isPublished:a.params.isPublished,modifiedDate:a.params.modifiedDate,modifiedBy:a.params.modifiedBy,don_vi:a.params.don_vi},success:n=>{"function"==typeof a.callback&&a.callback(n.data||null)},error:n=>{var i;"function"==typeof a.callback&&a.callback(null==n||null===(i=n.response)||void 0===i?void 0:i.data),console.error(n)},loading:a.loading,loadingController:a.loadingController})});return function(n){return f.apply(this,arguments)}}(),L=function(){var f=(0,p.A)(function*(a){a.params=a.params||{},(0,c.sj)({url:"QuanLyLapLich/xoa",params:{id:a.params.id},success:n=>{"function"==typeof a.callback&&a.callback(n.data||null)},error:n=>{var i;"function"==typeof a.callback&&a.callback(null==n||null===(i=n.response)||void 0===i?void 0:i.data),console.error(n)},loading:a.loading,loadingController:a.loadingController})});return function(n){return f.apply(this,arguments)}}(),v=function(){var f=(0,p.A)(function*(a){a.params=a.params||{},(0,c.sj)({url:"QuanLyLapLich/xoahoantoan",params:{id:a.params.id},success:n=>{"function"==typeof a.callback&&a.callback(n.data||null)},error:n=>{var i;"function"==typeof a.callback&&a.callback(null==n||null===(i=n.response)||void 0===i?void 0:i.data),console.error(n)},loading:a.loading,loadingController:a.loadingController})});return function(n){return f.apply(this,arguments)}}(),y=function(){var f=(0,p.A)(function*(a){a.params=a.params||{},(0,c.hm)({url:"QuanLyLapLich/thongtin",params:{id:a.params.id},success:n=>{"function"==typeof a.callback&&a.callback(n.data||null)},error:n=>{var i;"function"==typeof a.callback&&a.callback(null==n||null===(i=n.response)||void 0===i?void 0:i.data),console.error(n)},loading:a.loading,loadingController:a.loadingController})});return function(n){return f.apply(this,arguments)}}(),e=function(){var f=(0,p.A)(function*(a){a.params=a.params||{},(0,c.hm)({url:"QuanLyLapLich/chitietphonghop",params:{roomName:a.params.roomName},success:n=>{"function"==typeof a.callback&&a.callback(n.data||null)},error:n=>{var i;"function"==typeof a.callback&&a.callback(null==n||null===(i=n.response)||void 0===i?void 0:i.data),console.error(n)},loading:a.loading,loadingController:a.loadingController})});return function(n){return f.apply(this,arguments)}}(),P=function(){var f=(0,p.A)(function*(a){a.params=a.params||{},(0,c.Ll)({url:`QuanLyLapLich/xacnhan?id=${a.params.id}`,params:{id:a.params.id},success:n=>{"function"==typeof a.callback&&a.callback(n.data||null)},error:n=>{var i;"function"==typeof a.callback&&a.callback(null==n||null===(i=n.response)||void 0===i?void 0:i.data),console.error(n)},loading:a.loading,loadingController:a.loadingController})});return function(n){return f.apply(this,arguments)}}(),x=function(){var f=(0,p.A)(function*(a){a.params=a.params||{},(0,c.Ll)({url:`QuanLyLapLich/huyxacnhan?id=${a.params.id}`,params:{id:a.params.id},success:n=>{"function"==typeof a.callback&&a.callback(n.data||null)},error:n=>{var i;"function"==typeof a.callback&&a.callback(null==n||null===(i=n.response)||void 0===i?void 0:i.data),console.error(n)},loading:a.loading,loadingController:a.loadingController})});return function(n){return f.apply(this,arguments)}}(),M=function(){var f=(0,p.A)(function*(a){a.params=a.params||{},(0,c.Ll)({url:`QuanLyLapLich/khoiphuc?id=${a.params.id}`,params:{id:a.params.id},success:n=>{"function"==typeof a.callback&&a.callback(n.data||null)},error:n=>{var i;"function"==typeof a.callback&&a.callback(null==n||null===(i=n.response)||void 0===i?void 0:i.data),console.error(n)},loading:a.loading,loadingController:a.loadingController})});return function(n){return f.apply(this,arguments)}}(),k=function(){var f=(0,p.A)(function*(a){a.params=a.params||{},(0,c.hm)({url:"QuanLyLapLich/danhsach",params:{pageNumber:a.params.pageNumber,pageSize:a.params.pageSize,search:a.params.search,dateFrom:a.params.dateFrom,dateTo:a.params.dateTo,status:a.params.status,start:a.params.start,isdeleted:a.params.isdeleted},success:n=>{"function"==typeof a.callback&&a.callback(n.data||null)},error:n=>{var i;"function"==typeof a.callback&&a.callback(null==n||null===(i=n.response)||void 0===i?void 0:i.data),console.error(n)},loading:a.loading,loadingController:a.loadingController})});return function(n){return f.apply(this,arguments)}}(),T=function(){var f=(0,p.A)(function*(a){a.params=a.params||{},(0,c.hm)({url:"QuanLyLapLich/danhsachserver",params:{pageNumber:a.params.pageNumber,pageSize:a.params.pageSize,search:a.params.search},success:n=>{"function"==typeof a.callback&&a.callback(n.data||null)},error:n=>{var i;"function"==typeof a.callback&&a.callback(null==n||null===(i=n.response)||void 0===i?void 0:i.data),console.error(n)},loading:a.loading,loadingController:a.loadingController})});return function(n){return f.apply(this,arguments)}}(),A=function(){var f=(0,p.A)(function*(a){a.params=a.params||{},(0,c.hm)({url:"QuanLyLapLich/thongtinnguoidung",params:{pageNumber:a.params.pageNumber,pageSize:a.params.pageSize,search:a.params.search},success:n=>{"function"==typeof a.callback&&a.callback(n.data||null)},error:n=>{var i;"function"==typeof a.callback&&a.callback(null==n||null===(i=n.response)||void 0===i?void 0:i.data),console.error(n)},loading:a.loading,loadingController:a.loadingController})});return function(n){return f.apply(this,arguments)}}()},3890:(b,C,u)=>{u.d(C,{x:()=>L});var p=u(177),E=u(9417),h=u(4742),c=u(2706),o=u(4342),m=u(4438);let L=(()=>{var v;class y{}return(v=y).\u0275fac=function(P){return new(P||v)},v.\u0275mod=m.$C({type:v}),v.\u0275inj=m.G2t({imports:[p.MD,E.YN,h.bv,c.G,o.LP,c.G,o.LP]}),y})()},8902:(b,C,u)=>{u.r(C),u.d(C,{RoomExternalGuestPageModule:()=>O});var p=u(177),E=u(9417),h=u(4742),c=u(2175),o=u(467),m=u(5826),L=u(6539),v=u(5751),y=u(9485),e=u(4438),P=u(8833);const x=["jitsiContainer"];let G=(()=>{var r;class _{ngOnInit(){this.api=new window.JitsiMeetExternalAPI(this.roomData.server.ip,{roomName:this.roomData.roomName,width:"100%",height:"100%",parentNode:this.jitsiContainer.nativeElement,interfaceConfigOverwrite:{SHOW_JITSI_WATERMARK:!1,SHOW_WATERMARK_FOR_GUESTS:!1,DEFAULT_BACKGROUND:"#ffffff"},configOverwrite:{disableDeepLinking:!0,disableWakeLock:!0,startWithAudioMuted:!1,startWithVideoMuted:!1,disableAudioLevels:!1,enableWelcomePage:!1,disableSimulcast:!0},prejoinPageEnabled:!1,userInfo:{displayName:this.userData.name,email:this.userData.email},jwt:this.roomData.token,onload:()=>{console.log("Jitsi Meet iframe loaded")}}),this.api.addEventListener("videoConferenceJoined",t=>{console.log("Local user joined the conference:",t)}),this.api.addEventListener("participantJoined",t=>{console.log("Participant joined:",t)}),this.api.addEventListener("participantLeft",t=>{console.log("Participant left:",t)}),this.api.addEventListener("audioMuteStatusChanged",t=>{console.log("Audio mute status changed:",t.muted)}),this.api.addEventListener("videoMuteStatusChanged",t=>{console.log("Video mute status changed:",t.muted)}),this.api.addEventListener("readyToClose",()=>{console.log("Conference is ready to be closed"),window.location.replace(P._.HOME)}),this.api.on("errorOccurred",t=>{console.error("L\u1ed7i khi truy c\u1eadp camera ho\u1eb7c microphone: ",t)}),window.addEventListener("beforeunload",()=>{this.api.dispose()})}ngOnDestroy(){this.api&&this.api.dispose()}}return(r=_).\u0275fac=function(l){return new(l||r)},r.\u0275cmp=e.VBU({type:r,selectors:[["app-jitsi-meet"]],viewQuery:function(l,t){if(1&l&&e.GBs(x,7),2&l){let s;e.mGM(s=e.lsd())&&(t.jitsiContainer=s.first)}},inputs:{roomData:"roomData",userData:"userData"},decls:2,vars:0,consts:[["jitsiContainer",""],[2,"width","100%","height","100%"]],template:function(l,t){1&l&&e.nrm(0,"div",1,0)}}),_})();const M=["inputRoomPwd"];function k(r,_){1&r&&(e.j41(0,"ion-buttons",3),e.nrm(1,"ion-back-button",4),e.k0s())}function T(r,_){if(1&r&&(e.j41(0,"ion-content",5),e.nrm(1,"app-jitsi-meet",6),e.k0s()),2&r){const d=e.XpG(2);e.Y8G("scrollX",!1)("scrollY",!1),e.R7$(),e.Y8G("roomData",d.roomData)("userData",d.userData)}}function A(r,_){if(1&r){const d=e.RV6();e.j41(0,"div")(1,"div",10),e.EFF(2,"M\u1eadt kh\u1ea9u "),e.j41(3,"ion-text",11),e.EFF(4,"*"),e.k0s()(),e.j41(5,"ion-input",12,0),e.bIt("ionChange",function(t){e.eBV(d);const s=e.XpG(3);return e.Njj(s.changeRoomPwd(t))})("keyup.enter",function(){e.eBV(d);const t=e.XpG(3);return e.Njj(t.checkAccepted())}),e.k0s()()}}function f(r,_){if(1&r){const d=e.RV6();e.j41(0,"div",13)(1,"div",10),e.EFF(2,"T\xean hi\u1ec3n th\u1ecb "),e.j41(3,"ion-text",11),e.EFF(4,"*"),e.k0s()(),e.j41(5,"ion-input",14),e.bIt("ionChange",function(t){e.eBV(d);const s=e.XpG(3);return e.Njj(s.changeUserName(t))}),e.k0s()(),e.j41(6,"div",13)(7,"div",10),e.EFF(8,"Email "),e.j41(9,"ion-text",11),e.EFF(10,"*"),e.k0s()(),e.j41(11,"ion-input",15),e.bIt("ionChange",function(t){e.eBV(d);const s=e.XpG(3);return e.Njj(s.changeUserEmail(t))}),e.k0s()()}if(2&r){const d=e.XpG(3);e.R7$(5),e.Y8G("value",d.userData.name),e.R7$(6),e.Y8G("value",d.userData.email)}}function a(r,_){if(1&r){const d=e.RV6();e.j41(0,"ion-content")(1,"div",7),e.DNE(2,A,7,0,"div")(3,f,12,2),e.j41(4,"div",8)(5,"ion-button",9),e.bIt("click",function(){e.eBV(d);const t=e.XpG(2);return e.Njj(t.checkAccepted())}),e.j41(6,"ion-label"),e.EFF(7,"Tham gia"),e.k0s()()()()()}if(2&r){const d=e.XpG(2);e.R7$(2),e.vxM(2,d.isPassedPwd?-1:2),e.R7$(),e.vxM(3,d.isPassedAuth?-1:3)}}function n(r,_){if(1&r&&e.DNE(0,T,2,4,"ion-content",5)(1,a,8,2),2&r){const d=e.XpG();e.vxM(0,d.isAccepted?0:1)}}const R=[{path:"",component:(()=>{var r;class _{constructor(l,t,s,N,I){this.router=t,this.loadingController=s,this.modalController=N,this.toastController=I;let j=l.snapshot.params.id;j&&(this.roomName=j)}ngOnInit(){var l=this;(0,o.A)(function*(){var t,s;l.user=(yield(0,L.xk)()).data,l.userData={name:null===(t=l.user)||void 0===t?void 0:t.name,email:null===(s=l.user)||void 0===s?void 0:s.email},yield(0,y.Dy)(),yield(0,y.Gd)(),l.refreshData()})()}ngAfterViewInit(){setTimeout(()=>{var l;null===(l=this.inputRoomPwd)||void 0===l||l.setFocus()},300)}refreshData(){var l=this;return(0,o.A)(function*(){(0,m.bt)({loadingController:l.loadingController,params:{roomName:l.roomName},callback:t=>{null!=t&&t.status?(l.roomData=null==t?void 0:t.data,l.checkAccepted()):(0,v.q)(l.toastController,{},t).then(s=>s.present())}})})()}checkAccepted(){var l,t,s;this.isPassedAuth=!(!this.userData.name||!this.userData.email),this.isPassedPwd=null===(l=this.roomData)||void 0===l||!l.password||(null===(t=this.roomData)||void 0===t?void 0:t.password)==(null===(s=this.roomData)||void 0===s?void 0:s.confirm_password),this.isAccepted=this.isPassedAuth&&this.isPassedPwd}changeRoomPwd(l){var t=this;return(0,o.A)(function*(){t.roomData&&(t.roomData.confirm_password=l.detail.value)})()}changeUserName(l){var t=this;return(0,o.A)(function*(){var s;t.userData.name=null===(s=l.detail.value)||void 0===s?void 0:s.trim()})()}changeUserEmail(l){var t=this;return(0,o.A)(function*(){var s;t.userData.email=null===(s=l.detail.value)||void 0===s?void 0:s.trim()})()}}return(r=_).\u0275fac=function(l){return new(l||r)(e.rXU(c.nX),e.rXU(c.Ix),e.rXU(h.Xi),e.rXU(h.W3),e.rXU(h.K_))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-room-external-guest"]],viewQuery:function(l,t){if(1&l&&e.GBs(M,5),2&l){let s;e.mGM(s=e.lsd())&&(t.inputRoomPwd=s.first)}},decls:6,vars:3,consts:[["inputRoomPwd",""],[1,"ion-no-border"],["color","primary"],["slot","start"],["defaultHref","/","text",""],["mode","md",3,"scrollX","scrollY"],[3,"roomData","userData"],[1,"ion-padding"],[1,"mt-3"],["color","primary","expand","block",1,"ion-no-margin",3,"click"],[1,"fw-600","fs-16","mb-1"],["color","danger"],["mode","md","fill","outline","clear-input","true","placeholder","Nh\u1eadp m\u1eadt kh\u1ea9u ph\xf2ng h\u1ecdp",3,"ionChange","keyup.enter"],[1,"mt-4"],["mode","md","fill","outline","clear-input","true","placeholder","Nh\u1eadp t\xean hi\u1ec3n th\u1ecb","minlength","6","maxlength","100",3,"ionChange","value"],["mode","md","fill","outline","clear-input","true","placeholder","Nh\u1eadp email","minlength","6","maxlength","100",3,"ionChange","value"]],template:function(l,t){1&l&&(e.j41(0,"ion-header",1)(1,"ion-toolbar",2),e.DNE(2,k,2,0,"ion-buttons",3),e.j41(3,"ion-title"),e.EFF(4),e.k0s()()(),e.DNE(5,n,2,1)),2&l&&(e.R7$(2),e.vxM(2,t.isAccepted?-1:2),e.R7$(2),e.JRh(null==t.roomData?null:t.roomData.title),e.R7$(),e.vxM(5,t.roomData?5:-1))},dependencies:[h.Jm,h.QW,h.W9,h.eU,h.$w,h.he,h.IO,h.BC,h.ai,h.Gw,h.el,G],styles:["ion-input[fill=outline][_ngcontent-%COMP%]{--border-radius: 0}"]}),_})()}];let g=(()=>{var r;class _{}return(r=_).\u0275fac=function(l){return new(l||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[c.iI.forChild(R),c.iI]}),_})();var D=u(3890),Q=u(5173);let O=(()=>{var r;class _{}return(r=_).\u0275fac=function(l){return new(l||r)},r.\u0275mod=e.$C({type:r}),r.\u0275inj=e.G2t({imports:[p.MD,E.YN,h.bv,g,D.x,Q.Q]}),_})()},5751:(b,C,u)=>{u.d(C,{q:()=>E});var p=u(467);const E=function(){var h=(0,p.A)(function*(c,o,m){var L,v,y;return!o.message&&m&&(o.message=null!==(y=null==m?void 0:m.message)&&void 0!==y?y:"H\u1ec7 th\u1ed1ng kh\xf4ng c\xf3 ph\u1ea3n h\u1ed3i!",o.icon||(o.icon=null!=m&&m.message?"checkmark-circle-sharp":"alert-circle-outline"),o.color||(o.color=null!=m&&m.status?"success":-1==(null==m?void 0:m.data)?"danger":"warning")),o.position||(o.position="middle"),o.icon||(o.icon="bulb-outline"),o.color||(o.color="secondary"),o.duration=null!==(L=o.duration)&&void 0!==L?L:3e3,o.animated=null===(v=o.animated)||void 0===v||v,o.buttons=[{icon:"close-outline",side:"end",role:"cancel"}],yield c.create(o)});return function(o,m,L){return h.apply(this,arguments)}}()},2706:(b,C,u)=>{u.d(C,{G:()=>h});var p=u(4438);let h=(()=>{class c{}return c.\u0275fac=function(m){return new(m||c)},c.\u0275mod=p.$C({type:c}),c.\u0275inj=p.G2t({}),c})()}}]);