"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1064],{3890:(D,h,c)=>{c.d(h,{x:()=>f});var p=c(177),v=c(9417),o=c(4742),_=c(2706),l=c(4342),u=c(4438);let f=(()=>{var s;class t{}return(s=t).\u0275fac=function(M){return new(M||s)},s.\u0275mod=u.$C({type:s}),s.\u0275inj=u.G2t({imports:[p.MD,v.YN,o.bv,_.G,l.LP,_.G,l.LP]}),t})()},1064:(D,h,c)=>{c.r(h),c.d(h,{VotePageModule:()=>Q});var p=c(177),v=c(9417),o=c(4742),_=c(2175),l=c(467),u=c(220),f=c(6932),s=c(5751),t=c(4438);const C=()=>[];function M(e,d){if(1&e){const a=t.RV6();t.j41(0,"div",9)(1,"ion-checkbox",10),t.bIt("ionChange",function(i){const r=t.eBV(a).$implicit,m=t.XpG(3);return t.Njj(m.selectMutiVoted(i,r))}),t.j41(2,"ion-label",11),t.EFF(3),t.k0s()()()}if(2&e){const a=d.$implicit;t.R7$(),t.Y8G("value",a.id),t.R7$(2),t.JRh(a.title)}}function T(e,d){if(1&e&&(t.j41(0,"div"),t.Z7z(1,M,4,2,"div",9,t.fX1),t.k0s()),2&e){const a=t.XpG(2);t.R7$(),t.Dyx(a.itemData.meetingvoted||t.lJ4(0,C))}}function V(e,d){if(1&e&&(t.j41(0,"div",9)(1,"ion-radio",13)(2,"ion-label",11),t.EFF(3),t.k0s()()()),2&e){const a=d.$implicit;t.R7$(),t.Y8G("value",a.id),t.R7$(2),t.JRh(a.title)}}function b(e,d){if(1&e){const a=t.RV6();t.j41(0,"ion-radio-group",12),t.bIt("ionChange",function(i){t.eBV(a);const r=t.XpG(2);return t.Njj(r.selectOneVoted(i))}),t.Z7z(1,V,4,2,"div",9,t.fX1),t.k0s()}if(2&e){const a=t.XpG(2);t.R7$(),t.Dyx(a.itemData.meetingvoted||t.lJ4(0,C))}}function F(e,d){if(1&e&&(t.j41(0,"h5",7),t.EFF(1),t.k0s(),t.nrm(2,"hr",8),t.DNE(3,T,3,1,"div")(4,b,3,1)),2&e){const a=t.XpG();t.R7$(),t.JRh(a.itemData.title),t.R7$(2),t.vxM(3,a.itemData.type?3:4)}}let x=(()=>{var e;class d{constructor(n,i,r){this.loadingController=n,this.modalController=i,this.toastController=r,this.itemData={}}ngOnInit(){this.refreshData()}refreshData(){var n=this;return(0,l.A)(function*(){(0,f.uG)({loadingController:n.loadingController,params:{id:n.id},callback:i=>{n.itemData=(null==i?void 0:i.data)||{}}})})()}modalClose(){this.modalController.dismiss()}modalSubmit(){var n;let i=null===(n=this.itemData)||void 0===n||null===(n=n.meetingvoted)||void 0===n?void 0:n.filter(m=>m.selected);if(null==i||!i.length)return void(0,s.q)(this.toastController,{color:"warning",message:"Vui l\xf2ng l\u1ef1a ch\u1ecdn tr\u01b0\u1edbc khi x\xe1c nh\u1eadn."}).then(m=>m.present());let r=[];i.forEach(m=>{r.push(new Promise((g,y)=>{var E;(0,u.bj)({params:{title:m.title,voteId:null===(E=this.itemData)||void 0===E?void 0:E.id,isCreatedByAd:0},callback:P=>{null!=P&&P.status||(0,s.q)(this.toastController,{},P).then(Z=>Z.present()),g(P)}})}))}),Promise.all(r).then(m=>{(0,s.q)(this.toastController,{color:"success",message:"Bi\u1ec3u quy\u1ebft th\xe0nh c\xf4ng"}).then(g=>g.present()),this.modalController.dismiss(null,"success")})}selectMutiVoted(n,i){return(0,l.A)(function*(){i.selected=n.detail.checked})()}selectOneVoted(n){var i=this;return(0,l.A)(function*(){var r,m;null===(r=i.itemData)||void 0===r||null===(r=r.meetingvoted)||void 0===r||r.forEach(g=>{g.selected=!1}),null===(m=i.itemData)||void 0===m||null===(m=m.meetingvoted)||void 0===m||m.filter(g=>g.id==n.detail.value).forEach(g=>{g.selected=!0})})()}}return(e=d).\u0275fac=function(n){return new(n||e)(t.rXU(o.Xi),t.rXU(o.W3),t.rXU(o.K_))},e.\u0275cmp=t.VBU({type:e,selectors:[["app-modal-vote-choice"]],inputs:{id:"id"},decls:14,vars:1,consts:[["color","primary"],["slot","end"],[3,"click"],["color","light","name","close-outline"],[1,"ion-padding"],["collapse","fade"],["color","primary","expand","block",3,"click"],[1,"my-0","fw-700"],[1,"border-top","my-3"],[1,"mb-2"],["mode","md","labelPlacement","end",3,"ionChange","value"],[1,"text-wrap"],[3,"ionChange"],["mode","md","labelPlacement","end",3,"value"]],template:function(n,i){1&n&&(t.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),t.EFF(3,"Ch\u1ecdn bi\u1ec3u quy\u1ebft"),t.k0s(),t.j41(4,"ion-buttons",1)(5,"ion-button",2),t.bIt("click",function(){return i.modalClose()}),t.nrm(6,"ion-icon",3),t.k0s()()()(),t.j41(7,"ion-content",4),t.DNE(8,F,5,2),t.k0s(),t.j41(9,"ion-footer",5)(10,"ion-toolbar")(11,"ion-button",6),t.bIt("click",function(){return i.modalSubmit()}),t.j41(12,"ion-label"),t.EFF(13,"X\xe1c nh\u1eadn"),t.k0s()()()()),2&n&&(t.R7$(8),t.vxM(8,i.itemData?8:-1))},dependencies:[o.Jm,o.QW,o.eY,o.W9,o.M0,o.eU,o.iq,o.he,o.KO,o.f0,o.BC,o.ai,o.hB,o.Je]}),d})();var R=c(6539),j=c(1312),O=c(8833),I=c(4842);const $=e=>({$implicit:e}),k=()=>[];function U(e,d){1&e&&(t.j41(0,"div",7)(1,"div",9)(2,"div")(3,"div",10),t.nrm(4,"ion-img",11),t.k0s(),t.j41(5,"div",12),t.EFF(6),t.nI1(7,"translate"),t.k0s()()()()),2&e&&(t.R7$(6),t.JRh(t.bMT(7,1,"DataNotFound")))}function A(e,d){if(1&e&&(t.j41(0,"div",13),t.eu8(1,14),t.k0s()),2&e){t.XpG();const a=t.sdS(13);t.R7$(),t.Y8G("ngTemplateOutlet",a)}}function B(e,d){if(1&e){const a=t.RV6();t.j41(0,"ion-infinite-scroll",15),t.bIt("ionInfinite",function(i){t.eBV(a);const r=t.XpG();return t.Njj(r.infiniteChange(i))}),t.nrm(1,"ion-infinite-scroll-content"),t.k0s()}}function G(e,d){if(1&e&&(t.j41(0,"div",16),t.eu8(1,17),t.k0s()),2&e){const a=d.$implicit;t.XpG(2);const n=t.sdS(15);t.R7$(),t.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",t.eq3(2,$,a))}}function L(e,d){if(1&e&&t.Z7z(0,G,2,4,"div",16,t.fX1),2&e){const a=t.XpG();t.Dyx(a.listData)}}function N(e,d){1&e&&(t.j41(0,"ion-text",20),t.EFF(1,"Ch\u1ecdn nhi\u1ec1u"),t.k0s())}function X(e,d){1&e&&(t.j41(0,"ion-text",20),t.EFF(1,"Ch\u1ecdn m\u1ed9t"),t.k0s())}function S(e,d){1&e&&(t.j41(0,"ion-chip",21)(1,"ion-label"),t.EFF(2,"\u0110\xe3 k\u1ebft th\xfac"),t.k0s()())}function Y(e,d){1&e&&(t.j41(0,"ion-chip",25)(1,"ion-label"),t.EFF(2,"\u0110ang bi\u1ec3u quy\u1ebft"),t.k0s()())}function W(e,d){if(1&e&&(t.j41(0,"li",16),t.nrm(1,"ion-note",26),t.k0s()),2&e){const a=d.$implicit;t.R7$(),t.Y8G("innerHTML",a.title,t.npT)}}function z(e,d){if(1&e){const a=t.RV6();t.nrm(0,"hr",27),t.j41(1,"div",28)(2,"ion-button",29),t.bIt("click",function(){t.eBV(a);const i=t.XpG().$implicit,r=t.XpG();return t.Njj(r.presentModalVoteChoice(i.id))}),t.j41(3,"ion-label"),t.EFF(4,"Ch\u1ecdn bi\u1ec3u quy\u1ebft"),t.k0s()()()}}function K(e,d){if(1&e&&(t.j41(0,"div",18)(1,"div")(2,"div",19),t.DNE(3,N,2,0,"ion-text",20)(4,X,2,0)(5,S,3,0,"ion-chip",21)(6,Y,3,0),t.k0s(),t.nrm(7,"hr",22),t.j41(8,"div")(9,"div")(10,"b"),t.EFF(11),t.k0s()(),t.j41(12,"div",23)(13,"ul",24),t.Z7z(14,W,2,1,"li",16,t.fX1),t.k0s()()(),t.DNE(16,z,5,0),t.k0s()()),2&e){const a=d.$implicit;t.BMQ("color",a.end?"medium":"primary"),t.R7$(3),t.vxM(3,a.type?3:4),t.R7$(2),t.vxM(5,a.end?5:6),t.R7$(6),t.JRh(a.title),t.R7$(3),t.Dyx(a.meetingvoted||t.lJ4(5,k)),t.R7$(2),t.vxM(16,a.end?-1:16)}}const J=[{path:"",component:(()=>{var e;class d{constructor(n,i,r,m,g){this.router=n,this.activatedRoute=i,this.loadingController=r,this.toastController=m,this.modalController=g,this.APP_ROUTE=O._,this.APP_FUNC_FormatDate=j.Rv,this.filter={},this.paging={sortfield:null,sorttype:null,page:1,limit:20,active:!0},this.listData=[],this.limitLoad=0;let y=i.snapshot.params.id;y&&(this.scheduleId=y)}ngOnInit(){var n=this;(0,l.A)(function*(){(yield(0,R.kU)())&&n.loadData()})()}pushData(n){1==this.paging.page&&(this.listData.length=0),this.listData=this.listData.concat(n)}refreshData(){this.filter={},this.paging.page=1,this.paging.active=!0,this.loadData()}loadData(n){this.loadData_Paging_Limit(n)}loadData_More(n){this.paging.page+=1,this.loadData_Paging_Limit(n)}loadData_Paging_Limit(n){var i=this;return(0,l.A)(function*(){if(i.limitLoad>0)return void(n&&n());i.limitLoad=300;let r=setInterval(()=>{i.limitLoad-=100,i.limitLoad<=0&&(clearInterval(r),i.loadData_Paging(n))},100)})()}loadData_Paging(n){var i=this;return(0,l.A)(function*(){(0,f.hN)({loadingController:i.loadingController,params:{pageNumber:i.paging.page,pageSize:i.paging.limit,scheduleId:i.scheduleId},callback:r=>{var m;null!=r&&r.status?i.pushData(null!==(m=null==r?void 0:r.data)&&void 0!==m?m:[]):(0,s.q)(i.toastController,{},r).then(g=>g.present()),i.listData.length<i.paging.limit*i.paging.page&&(i.paging.active=!1),n&&n()}})})()}refresherChange(n){this.filter={},this.paging.page=1,this.paging.active=!0,this.loadData(()=>{n.target.complete()})}infiniteChange(n){this.loadData_More(()=>{n.target.complete()})}searchChange(n){this.filter.search=n.target.value.replace(/\s+/g," ").trim(),this.paging.page=1,this.paging.active=!0,this.loadData_Paging_Limit()}filterChange(){this.paging.page=1,this.paging.active=!0,this.loadData_Paging_Limit()}presentModalVoteChoice(n){var i=this;return(0,l.A)(function*(){if(!n)return;const r=yield i.modalController.create({component:x,componentProps:{id:n}});r.onDidDismiss().then(m=>{"success"==m.role&&i.refreshData()}),r.present()})()}}return(e=d).\u0275fac=function(n){return new(n||e)(t.rXU(_.Ix),t.rXU(_.nX),t.rXU(o.Xi),t.rXU(o.K_),t.rXU(o.W3))},e.\u0275cmp=t.VBU({type:e,selectors:[["app-vote"]],decls:16,vars:2,consts:[["templateList",""],["templateVote",""],[1,"ion-no-border"],["color","primary"],["slot","start"],["defaultHref","/","text",""],["slot","fixed",3,"ionRefresh"],[1,"py-5"],[3,"ionInfinite",4,"ngIf"],[1,"d-flex","align-items-center","justify-content-center","data-not-found"],[1,"d-flex","justify-content-center"],["src","../../../assets/image/no-documents.svg",1,"w-40"],[1,"mt-2","text-center"],[1,"ion-padding"],[3,"ngTemplateOutlet"],[3,"ionInfinite"],[1,"mb-2"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"card-vote"],[1,"d-flex","align-items-center","justify-content-between"],["color","primary",1,"fs-14"],["color","medium",1,"ion-no-margin","fs-10","min-h-20","py-0","no-opacity"],[1,"border-top","mt-3","mb-2"],[1,"mt-2"],[1,"my-0"],["color","warning",1,"ion-no-margin","fs-10","min-h-20","py-0","no-opacity"],["color","medium",1,"text-wrap",3,"innerHTML"],[1,"border-top","my-2"],[1,"d-flex"],["size","small","color","primary",1,"flex-grow-1","m-1",3,"click"]],template:function(n,i){if(1&n){const r=t.RV6();t.j41(0,"ion-header",2)(1,"ion-toolbar",3)(2,"ion-buttons",4),t.nrm(3,"ion-back-button",5),t.k0s(),t.j41(4,"ion-title"),t.EFF(5,"Danh m\u1ee5c bi\u1ec3u quy\u1ebft"),t.k0s()()(),t.j41(6,"ion-content")(7,"ion-refresher",6),t.bIt("ionRefresh",function(g){return t.eBV(r),t.Njj(i.refresherChange(g))}),t.nrm(8,"ion-refresher-content"),t.k0s(),t.DNE(9,U,8,3,"div",7)(10,A,2,1)(11,B,2,0,"ion-infinite-scroll",8),t.k0s(),t.DNE(12,L,2,0,"ng-template",null,0,t.C5r)(14,K,17,6,"ng-template",null,1,t.C5r)}2&n&&(t.R7$(9),t.vxM(9,i.listData.length?10:9),t.R7$(2),t.Y8G("ngIf",i.paging.active))},dependencies:[p.bT,p.T3,o.Jm,o.QW,o.ZB,o.W9,o.eU,o.KW,o.Ax,o.Hp,o.he,o.JI,o.To,o.Ki,o.IO,o.BC,o.ai,o.el,I.D9],styles:['.card-vote[_ngcontent-%COMP%]{--line-color: var(--ion-color-primary);position:relative}.card-vote[color=primary][_ngcontent-%COMP%]:before{--line-color: var(--ion-color-primary)}.card-vote[color=success][_ngcontent-%COMP%]:before{--line-color: var(--ion-color-success)}.card-vote[color=warning][_ngcontent-%COMP%]:before{--line-color: var(--ion-color-warning)}.card-vote[color=danger][_ngcontent-%COMP%]:before{--line-color: var(--ion-color-danger)}.card-vote[color=medium][_ngcontent-%COMP%]:before{--line-color: var(--ion-color-medium)}.card-vote[_ngcontent-%COMP%]:before{content:"";padding-left:1rem;background-color:var(--line-color);position:absolute;top:0;left:-3px;bottom:0;border-radius:1rem 0 0 1rem}.card-vote[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;padding:1rem;background-color:var(--ion-color-light);color:var(--ion-color-light-contrast);border-radius:1rem}.card-vote[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:decimal;padding:0 0 0 1rem}']}),d})()}];let H=(()=>{var e;class d{}return(e=d).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.$C({type:e}),e.\u0275inj=t.G2t({imports:[_.iI.forChild(J),_.iI]}),d})();var w=c(3890);let Q=(()=>{var e;class d{}return(e=d).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.$C({type:e}),e.\u0275inj=t.G2t({imports:[p.MD,v.YN,o.bv,H,w.x]}),d})()},5751:(D,h,c)=>{c.d(h,{q:()=>v});var p=c(467);const v=function(){var o=(0,p.A)(function*(_,l,u){var f,s,t;return!l.message&&u&&(l.message=null!==(t=null==u?void 0:u.message)&&void 0!==t?t:"H\u1ec7 th\u1ed1ng kh\xf4ng c\xf3 ph\u1ea3n h\u1ed3i!",l.icon||(l.icon=null!=u&&u.message?"checkmark-circle-sharp":"alert-circle-outline"),l.color||(l.color=null!=u&&u.status?"success":-1==(null==u?void 0:u.data)?"danger":"warning")),l.position||(l.position="bottom"),l.icon||(l.icon="bulb-outline"),l.color||(l.color="secondary"),l.duration=null!==(f=l.duration)&&void 0!==f?f:3e3,l.animated=null===(s=l.animated)||void 0===s||s,l.buttons=[{icon:"close-outline",side:"end",role:"cancel"}],yield _.create(l)});return function(l,u,f){return o.apply(this,arguments)}}()},1312:(D,h,c)=>{c.d(h,{IV:()=>l,NY:()=>u,Rv:()=>o,k8:()=>f});var p=c(7586),v=c.n(p);function o(s,t,C){return C?v()(s||void 0).utcOffset(0,!1).format(null!=t?t:"HH:mm, DD/MM/YYYY"):v()(s||void 0).format(null!=t?t:"HH:mm, DD/MM/YYYY")}const l=s=>(null!=s?s:"0123456789").replace(/^0/,"+84").replace(/(.)(?=(\d{3})+$)/g,"$1 ")||null,u=s=>(null!=s?s:"123456789").replace(/[^0-9]/,"").replace(/(.)(?=(\d{3})+$)/g,"$1 ")||null,f=s=>{if(!s)return!1;try{return navigator.clipboard.writeText(s),!0}catch(t){console.error(t)}return!1}},2706:(D,h,c)=>{c.d(h,{G:()=>o});var p=c(4438);let o=(()=>{class _{}return _.\u0275fac=function(u){return new(u||_)},_.\u0275mod=p.$C({type:_}),_.\u0275inj=p.G2t({}),_})()}}]);