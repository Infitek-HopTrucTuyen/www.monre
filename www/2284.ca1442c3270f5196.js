"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2284],{2284:(C,v,l)=>{l.r(v),l.d(v,{DocumentPageModule:()=>L});var p=l(177),_=l(9417),r=l(4742),f=l(2175),o=l(467),s=l(7103),h=l(8507),c=l(5811),d=l(197),P=l(6539),M=l(5751),y=l(1312),I=l(8833),t=l(4438),R=l(4842);function F(i,m){1&i&&(t.j41(0,"div",6)(1,"div",8)(2,"div")(3,"div",9),t.nrm(4,"ion-img",10),t.k0s(),t.j41(5,"div",11),t.EFF(6),t.nI1(7,"translate"),t.k0s()()()()),2&i&&(t.R7$(6),t.JRh(t.bMT(7,1,"DataNotFound")))}function j(i,m){if(1&i&&(t.j41(0,"div",12),t.eu8(1,13),t.k0s()),2&i){t.XpG();const u=t.sdS(13);t.R7$(),t.Y8G("ngTemplateOutlet",u)}}function N(i,m){if(1&i){const u=t.RV6();t.j41(0,"ion-infinite-scroll",14),t.bIt("ionInfinite",function(n){t.eBV(u);const a=t.XpG();return t.Njj(a.infiniteChange(n))}),t.nrm(1,"ion-infinite-scroll-content"),t.k0s()}}function x(i,m){if(1&i){const u=t.RV6();t.j41(0,"div",16)(1,"ion-item",17),t.bIt("click",function(){const n=t.eBV(u).$implicit,a=t.XpG(2);return t.Njj(a.presentModalDocumentDetail(n.fileOriginalName,n.fileType,n.fileUrl))}),t.nrm(2,"ion-icon",18),t.j41(3,"ion-label"),t.EFF(4),t.k0s()(),t.nrm(5,"hr",19),t.j41(6,"div",20)(7,"ion-button",21),t.bIt("click",function(){const n=t.eBV(u).$implicit,a=t.XpG(2);return t.Njj(a.downloadDocument(n))}),t.j41(8,"ion-label"),t.EFF(9),t.nI1(10,"translate"),t.k0s()()()()}if(2&i){const u=m.$implicit;t.R7$(4),t.JRh(u.title),t.R7$(5),t.JRh(t.bMT(10,2,"Download"))}}function E(i,m){if(1&i&&(t.j41(0,"ion-list",15),t.Z7z(1,x,11,4,"div",16,t.fX1),t.k0s()),2&i){const u=t.XpG();t.R7$(),t.Dyx(u.listData)}}const A=[{path:"",component:(()=>{var i;class m{constructor(e,n,a,g,D){this.router=e,this.activatedRoute=n,this.loadingController=a,this.toastController=g,this.modalController=D,this.APP_ROUTE=I._,this.APP_FUNC_FormatDate=y.Rv,this.filter={},this.paging={sortfield:null,sorttype:null,page:1,limit:20,active:!0},this.listData=[],this.limitLoad=0;let T=n.snapshot.params.id;T&&(this.scheduleId=T)}ngOnInit(){var e=this;(0,o.A)(function*(){(yield(0,P.kU)())&&e.loadData()})()}pushData(e){1==this.paging.page&&(this.listData.length=0),this.listData=this.listData.concat(e)}refreshData(){this.filter={},this.paging.page=1,this.paging.active=!0,this.loadData()}loadData(e){this.loadData_Paging_Limit(e)}loadData_More(e){this.paging.page+=1,this.loadData_Paging_Limit(e)}loadData_Paging_Limit(e){var n=this;return(0,o.A)(function*(){if(n.limitLoad>0)return void(e&&e());n.limitLoad=300;let a=setInterval(()=>{n.limitLoad-=100,n.limitLoad<=0&&(clearInterval(a),n.loadData_Paging(e))},100)})()}loadData_Paging(e){var n=this;return(0,o.A)(function*(){(0,d.cV)({loadingController:n.loadingController,params:{pageNumber:n.paging.page,pageSize:n.paging.limit,scheduleId:n.scheduleId},callback:a=>{var g;null!=a&&a.status?n.pushData(null!==(g=null==a?void 0:a.data)&&void 0!==g?g:[]):(0,M.q)(n.toastController,{},a).then(D=>D.present()),n.listData.length<n.paging.limit*n.paging.page&&(n.paging.active=!1),e&&e()}})})()}refresherChange(e){this.filter={},this.paging.page=1,this.paging.active=!0,this.loadData(()=>{e.target.complete()})}infiniteChange(e){this.loadData_More(()=>{e.target.complete()})}searchChange(e){this.filter.search=e.target.value.replace(/\s+/g," ").trim(),this.paging.page=1,this.paging.active=!0,this.loadData_Paging_Limit()}filterChange(){this.paging.page=1,this.paging.active=!0,this.loadData_Paging_Limit()}presentModalVoteChoice(e){var n=this;return(0,o.A)(function*(){if(!e)return;const a=yield n.modalController.create({component:h.y,componentProps:{id:e}});a.onDidDismiss().then(g=>{"success"==g.role&&n.refreshData()}),a.present()})()}presentModalVoteDetail(e){var n=this;return(0,o.A)(function*(){e&&(yield n.modalController.create({component:c.Q,componentProps:{id:e}})).present()})()}downloadDocument(e){var n=this;return(0,o.A)(function*(){(0,d.CJ)({loadingController:n.loadingController,params:{scheduleId:n.scheduleId,fileName:e.fileOriginalName,fileType:e.fileType},callback:a=>{}})})()}presentModalDocumentDetail(e,n,a){var g=this;return(0,o.A)(function*(){(yield g.modalController.create({component:s.f,componentProps:{fileName:e,fileType:n,fileUrl:a,scheduleId:g.scheduleId,mod:"document"}})).present()})()}}return(i=m).\u0275fac=function(e){return new(e||i)(t.rXU(f.Ix),t.rXU(f.nX),t.rXU(r.Xi),t.rXU(r.K_),t.rXU(r.W3))},i.\u0275cmp=t.VBU({type:i,selectors:[["app-document"]],decls:14,vars:2,consts:[["templateList",""],[1,"ion-no-border"],["color","primary"],["slot","start"],["defaultHref","/","text",""],["slot","fixed",3,"ionRefresh"],[1,"py-5"],[3,"ionInfinite",4,"ngIf"],[1,"d-flex","align-items-center","justify-content-center","data-not-found"],[1,"d-flex","justify-content-center"],["src","../../../assets/image/no-documents.svg",1,"w-40"],[1,"mt-2","text-center"],[1,"ion-padding"],[3,"ngTemplateOutlet"],[3,"ionInfinite"],["lines","none"],[1,"card-item","mb-3"],["button","true","detail","false",3,"click"],["slot","start","color","primary","name","folder-outline",1,"fs-24"],[1,"border-top","border-dashed","my-0"],[1,"d-flex","align-item-center","justify-content-end","mx-1"],["size","small","color","primary","fill","outline",1,"min-w-120",3,"click"]],template:function(e,n){if(1&e){const a=t.RV6();t.j41(0,"ion-header",1)(1,"ion-toolbar",2)(2,"ion-buttons",3),t.nrm(3,"ion-back-button",4),t.k0s(),t.j41(4,"ion-title"),t.EFF(5,"T\xe0i li\u1ec7u cu\u1ed9c h\u1ecdp"),t.k0s()()(),t.j41(6,"ion-content")(7,"ion-refresher",5),t.bIt("ionRefresh",function(D){return t.eBV(a),t.Njj(n.refresherChange(D))}),t.nrm(8,"ion-refresher-content"),t.k0s(),t.DNE(9,F,8,3,"div",6)(10,j,2,1)(11,N,2,0,"ion-infinite-scroll",7),t.k0s(),t.DNE(12,E,3,0,"ng-template",null,0,t.C5r)}2&e&&(t.R7$(9),t.vxM(9,n.listData.length?10:9),t.R7$(2),t.Y8G("ngIf",n.paging.active))},dependencies:[p.bT,p.T3,r.Jm,r.QW,r.W9,r.eU,r.iq,r.KW,r.Ax,r.Hp,r.uz,r.he,r.nf,r.To,r.Ki,r.BC,r.ai,r.el,R.D9],styles:["ion-list[_ngcontent-%COMP%]{--background: transparent}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--border-radius: .5rem;--background: var(--ion-color-light)}.card-item[_ngcontent-%COMP%]{background-color:var(--ion-color-light);border-radius:.5rem;border:1px solid var(--ion-color-light-shade)}"]}),m})()}];let O=(()=>{var i;class m{}return(i=m).\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.$C({type:i}),i.\u0275inj=t.G2t({imports:[f.iI.forChild(A),f.iI]}),m})();var U=l(3890);let L=(()=>{var i;class m{}return(i=m).\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.$C({type:i}),i.\u0275inj=t.G2t({imports:[p.MD,_.YN,r.bv,O,U.x]}),m})()},5751:(C,v,l)=>{l.d(v,{q:()=>_});var p=l(467);const _=function(){var r=(0,p.A)(function*(f,o,s){var h,c,d;return!o.message&&s&&(o.message=null!==(d=null==s?void 0:s.message)&&void 0!==d?d:"H\u1ec7 th\u1ed1ng kh\xf4ng c\xf3 ph\u1ea3n h\u1ed3i!",o.icon||(o.icon=null!=s&&s.message?"checkmark-circle-sharp":"alert-circle-outline"),o.color||(o.color=null!=s&&s.status?"success":-1==(null==s?void 0:s.data)?"danger":"warning")),o.position||(o.position="middle"),o.icon||(o.icon="bulb-outline"),o.color||(o.color="secondary"),o.duration=null!==(h=o.duration)&&void 0!==h?h:3e3,o.animated=null===(c=o.animated)||void 0===c||c,o.buttons=[{icon:"close-outline",side:"end",role:"cancel"}],yield f.create(o)});return function(o,s,h){return r.apply(this,arguments)}}()},1312:(C,v,l)=>{l.d(v,{IV:()=>o,NY:()=>s,Rv:()=>r,k8:()=>h});var p=l(7586),_=l.n(p);function r(c,d,P){return P?_()(c||void 0).utcOffset(0,!1).format(null!=d?d:"HH:mm, DD/MM/YYYY"):_()(c||void 0).format(null!=d?d:"HH:mm, DD/MM/YYYY")}const o=c=>(null!=c?c:"0123456789").replace(/^0/,"+84").replace(/(.)(?=(\d{3})+$)/g,"$1 ")||null,s=c=>(null!=c?c:"123456789").replace(/[^0-9]/,"").replace(/(.)(?=(\d{3})+$)/g,"$1 ")||null,h=c=>{if(!c)return!1;try{return navigator.clipboard.writeText(c),!0}catch(d){console.error(d)}return!1}}}]);